process PROD  = {
	service = MessageLogger
	{
	untracked vstring destinations = {"cout"}

 	untracked vstring categories = {"CaloSim",
					"EcalGeom",
					"EcalSim",
					"HCalGeom",
					"HcalSim",
					"HFShower"}
	untracked vstring debugModules = { "*" }
	untracked PSet cout = { untracked string threshold = "DEBUG"
			untracked PSet INFO     = { untracked int32 limit =-1 }
			untracked PSet DEBUG    = { untracked int32 limit = 0 }
			untracked PSet CaloSim  = { untracked int32 limit = 0 }
			untracked PSet EcalGeom = { untracked int32 limit = 0 }
			untracked PSet EcalSim  = { untracked int32 limit = 0 }
			untracked PSet HCalGeom = { untracked int32 limit = 0 }
			untracked PSet HcalSim  = { untracked int32 limit =-1 }
			untracked PSet HFShower = { untracked int32 limit =-1 }
		}
   	}
	
	service = RandomNumberGeneratorService
	{
	      	untracked uint32 sourceSeed = 135799753
      		PSet moduleSeeds =
      		{
        	 untracked uint32 VtxSmeared = 123456789
	         untracked uint32 g4SimHits = 9876
      		}
   	}

	service = Timing {}

	untracked PSet maxEvents = {untracked int32 input = 10}

	module rndmStore = RandomEngineStateProducer { }

	include "Configuration/Generator/data/PythiaMinBias.cfi"

        # Vtx Smearing
        include "IOMC/EventVertexGenerators/data/VtxSmearedGauss.cfi"

	#Geometry
	include "Geometry/CMSCommonData/data/ecalhcalGeometryXML.cfi"

	#Magnetic Field
	include "Configuration/StandardSequences/data/MagneticField.cff"

#	include "Configuration/EventContent/data/EventContent.cff"
	module o1 = PoolOutputModule { 
#		using FEVTSIMEventContent
		untracked string fileName = "simevent.root" 
	}

	include "SimG4Core/Application/data/g4SimHits.cfi"
	replace g4SimHits.Physics.type = "SimG4Core/Physics/QGSP"
	replace g4SimHits.Watchers = {
		{	string type            = "HcalTestAnalysis"
			PSet HcalTestAnalysis = 
			{
				double  Eta0          = 0.0
				double  Phi0          = 0.0
				int32   LayerGrouping = 1
				int32   CentralTower  = 404
				vstring Names         = {"HcalHits",
							"EcalHitsEB",
							"EcalHitsEE"}
				string  FileName      = "HcalTestAnalysis.root"
			}
			PSet HcalQie = 
			{
				double  qToPE         = 4.0
				int32   BinOfMax      = 6
				int32   SignalBuckets = 2
				int32   PreSamples    = 0
				int32   NumOfBuckets  = 10
				double  SigmaNoise    = 0.5
				double  EDepPerPE     = 0.0005
				int32   BaseLine      = 4
			}
		}}

	path p1 = { VtxSmeared, g4SimHits }
	endpath outpath = { o1 }
}		
